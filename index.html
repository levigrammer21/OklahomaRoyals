<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oklahoma Royals HQ ‚Ä¢ 8U & 9U</title>
  <meta name="description" content="Oklahoma Royals HQ ‚Äî announcements, schedule, roster, Royal of the Week, highlights, sponsors, donations, fundraisers, and USSSA." />

  <style>
    :root{
      /* ===== ROYAL + BRIGHT (SOFTER) THEME ===== */
      --bg:#eef3ff;
      --text:#0b1020;
      --muted:#55627a;

      --royal:#1E3EFF;
      --royal2:#0F1E7A;

      --gold:#d7b35c;
      --goldSoft: rgba(215,179,92,.18);

      --good:#16a34a;
      --warn:#f59e0b;
      --bad:#dc2626;

      --card:#ffffff;
      --line: rgba(15,30,122,.12);

      --shadow: 0 18px 45px rgba(10,20,60,.12);
      --shadow2: 0 10px 24px rgba(10,20,60,.10);
      --radius: 18px;
      --ring: 0 0 0 3px rgba(30,62,255,.18);
      --max: 1120px;

      --glowRoyal: 0 0 22px rgba(30,62,255,.18);
      --glowGold: 0 0 18px rgba(215,179,92,.18);
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      line-height:1.45;
      background:
        radial-gradient(900px 520px at 12% -10%, rgba(30,62,255,.16), transparent 62%),
        radial-gradient(900px 520px at 92% 0%, rgba(215,179,92,.20), transparent 62%),
        radial-gradient(900px 520px at 70% 110%, rgba(15,30,122,.10), transparent 60%),
        linear-gradient(180deg, #fbfcff, var(--bg) 56%, #fbfcff);
      background-attachment: fixed;
    }

    /* watermark layer */
    body:before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background: url("images/royal-throne.png");
      background-repeat:no-repeat;
      background-position:center;
      background-size: min(1200px, 92vw);
      opacity:.06;
      filter: saturate(1.05) contrast(1.05);
      transform: translateZ(0);
    }

    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}
    .container{max-width:var(--max); margin:0 auto; padding:0 18px}

    header{
      position:sticky;
      top:0;
      z-index:60;
      backdrop-filter: blur(12px);
      background: rgba(255,255,255,.82);
      border-bottom: 1px solid rgba(15,30,122,.12);
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 0;
      gap:12px;
      position:relative;
    }

    .brand{display:flex;align-items:center;gap:10px;min-width: 240px; position:relative; z-index:2}

    .logo{
      width:44px; height:44px; border-radius:16px;
      background:
        radial-gradient(120px 120px at 30% 20%, rgba(215,179,92,.50), transparent 55%),
        linear-gradient(135deg, rgba(30,62,255,.95), rgba(15,30,122,.55));
      box-shadow: var(--shadow2), var(--glowRoyal);
      display:grid; place-items:center;
      border:1px solid rgba(15,30,122,.12);
      overflow:hidden;
      font-weight:1000;
    }
    .logoImg{
      width:100%;
      height:100%;
      object-fit:contain;
      padding:6px;
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.18));
    }

    .brand h1{font-size:14px; margin:0}
    .brand p{margin:0; font-size:12px; color:var(--muted)}

    /* ===== MOBILE HAMBURGER (MENU) ===== */
    .hamburger{
      width:44px; height:44px;
      border-radius:16px;
      border:1px solid rgba(15,30,122,.14);
      background:
        radial-gradient(90px 50px at 20% 0%, rgba(215,179,92,.22), transparent 60%),
        linear-gradient(135deg, rgba(30,62,255,.14), rgba(255,255,255,.60));
      box-shadow: var(--shadow2), var(--glowRoyal);
      cursor:pointer;
      position:relative;
      z-index:3;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .hamburger:hover{filter:brightness(1.02)}
    .hamburger span{
      position:absolute; left:12px; right:12px;
      height:2px; border-radius:2px;
      background: rgba(15,30,122,.92);
      box-shadow: 0 0 14px rgba(30,62,255,.18);
      pointer-events:none;
    }
    .hamburger span:nth-child(1){top:14px}
    .hamburger span:nth-child(2){top:21px; opacity:.85}
    .hamburger span:nth-child(3){top:28px}

    .drawerOverlay{
      position:fixed; inset:0;
      background: rgba(10,20,60,.35);
      backdrop-filter: blur(6px);
      display:none;
      z-index:80;
    }
    .drawer{
      position:fixed;
      top:12px; right:12px; left:12px;
      max-width: 520px;
      margin-left:auto;
      border-radius: 22px;
      border: 1px solid rgba(15,30,122,.16);
      background:
        radial-gradient(900px 260px at 20% 0%, rgba(30,62,255,.18), transparent 60%),
        radial-gradient(700px 260px at 90% 40%, rgba(215,179,92,.22), transparent 60%),
        rgba(255,255,255,.96);
      box-shadow: 0 20px 60px rgba(10,20,60,.22), var(--glowRoyal), var(--glowGold);
      padding:14px;
      display:none;
      z-index:90;
    }
    .drawerTop{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding-bottom:10px;
      border-bottom: 1px solid rgba(15,30,122,.12);
      margin-bottom:10px;
    }
    .drawerTitle{display:flex; align-items:center; gap:10px}
    .drawerTitle b{font-weight:1000}
    .drawerTitle small{color: rgba(15,30,122,.70)}
    .drawerClose{
      width:44px; height:44px; border-radius:16px;
      border:1px solid rgba(15,30,122,.14);
      background: rgba(255,255,255,.85);
      color: var(--royal2);
      cursor:pointer;
      font-weight:1000;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .drawerClose:hover{background:#fff}

    .drawerLinks{display:grid; gap:10px;}
    .drawerLinks a{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(30,62,255,.05);
      color: var(--royal2);
      box-shadow: inset 0 0 0 1px rgba(30,62,255,.06);
      font-weight:900;
    }
    .drawerLinks a:hover{
      background: rgba(30,62,255,.08);
      border-color: rgba(30,62,255,.22);
      box-shadow: var(--glowRoyal);
    }
    .drawerLinks small{color: rgba(15,30,122,.70); font-weight:800}
    .drawerCtas{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}

    body.menuOpen{overflow:hidden}
    body.menuOpen .drawerOverlay{display:block}
    body.menuOpen .drawer{display:block}

    /* ===== PAGE CONTENT ===== */
    .hero{padding: 22px 0 10px; position:relative; z-index:1}
    .heroGrid{display:grid;grid-template-columns: 1.2fr .8fr;gap:18px;align-items:stretch;}

    .card{
      border-radius: var(--radius);
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,30,122,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      z-index:1;
    }

    .heroMain{padding:22px;position:relative;overflow:hidden;}
    .heroMain:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(800px 260px at 10% 0%, rgba(30,62,255,.16), transparent 60%),
        radial-gradient(700px 280px at 90% 30%, rgba(215,179,92,.20), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.40), rgba(255,255,255,0));
      pointer-events:none;
    }
    .heroMain > *{position:relative}

    .tag{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(15,30,122,.14);
      background: rgba(255,255,255,.74);
      color: rgba(15,30,122,.76);
      font-size:12px;
      font-weight:900;
    }
    .tag b{color:var(--royal2)}
    .tagLogo{
      width:18px; height:18px; object-fit:contain;
      filter: drop-shadow(0 4px 10px rgba(0,0,0,.12));
    }

    .heroTitle{
      margin:14px 0 8px;
      font-size: 36px;
      line-height:1.05;
      letter-spacing:-.02em;
      color: var(--royal2);
    }
    .heroTitle .glow{
      color: var(--royal);
      text-shadow: 0 0 18px rgba(30,62,255,.18);
    }
    .heroDesc{margin:0 0 16px; color:var(--muted); max-width: 62ch}

    .miniCard{
      border-radius:16px;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.86);
      padding:14px;
      box-shadow: 0 10px 24px rgba(10,20,60,.06);
    }
    .miniCard h3{margin:0 0 6px; font-size:14px; color: var(--royal2)}
    .miniCard p{margin:0; color:var(--muted); font-size:13px}

    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(15,30,122,.14);
      background: rgba(255,255,255,.84);
      color:var(--royal2);
      cursor:pointer;
      user-select:none;
      font-weight:1000;
      box-shadow: 0 10px 22px rgba(10,20,60,.08);
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .btn:hover{background: #ffffff; box-shadow: var(--shadow2)}
    .btn.primary{
      border-color: rgba(30,62,255,.30);
      background:
        radial-gradient(420px 160px at 20% 0%, rgba(215,179,92,.24), transparent 62%),
        linear-gradient(135deg, rgba(30,62,255,.14), rgba(215,179,92,.14));
      color: var(--royal2);
      box-shadow: var(--shadow), var(--glowRoyal);
    }

    .pill{
      font-size:12px; color: rgba(15,30,122,.78);
      border:1px solid rgba(15,30,122,.14);
      padding:4px 8px;
      border-radius:999px;
      background: rgba(255,255,255,.72);
      font-weight:900;
    }

    .status{
      font-size:12px; padding:4px 8px; border-radius:999px;
      display:inline-flex;
      border:1px solid rgba(15,30,122,.14);
      color: rgba(15,30,122,.78);
      background: rgba(255,255,255,.72);
      font-weight:900;
    }
    .status.good{border-color: rgba(22,163,74,.30); color: rgba(20,90,40,1); background: rgba(22,163,74,.10)}
    .status.warn{border-color: rgba(245,158,11,.35); color: rgba(120,65,0,1); background: rgba(245,158,11,.12)}

    section{padding: 18px 0; position:relative; z-index:1}
    .sectionHead{display:flex;align-items:flex-end;justify-content:space-between;gap:14px;margin-bottom: 12px;}
    .sectionHead h2{margin:0; font-size:18px; color: var(--royal2)}
    .sectionHead p{margin:0; color:var(--muted); font-size:13px}

    .grid2{display:grid; grid-template-columns: 1fr 1fr; gap:14px}

    .wrap{padding:14px}
    .controls{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:10px}
    .input{
      flex:1;min-width: 220px;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(15,30,122,.14);
      background: rgba(255,255,255,.88);
      color: var(--text);
      outline:none;
      box-shadow: inset 0 0 0 1px rgba(30,62,255,.04);
    }
    .input:focus{box-shadow: var(--ring); border-color: rgba(30,62,255,.30)}

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      overflow:hidden;
      border-radius: 16px;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.90);
    }
    th,td{
      padding:10px 10px;
      font-size:13px;
      text-align:left;
      border-bottom:1px solid rgba(15,30,122,.10);
      vertical-align:top;
      color: var(--text);
    }
    th{
      background: rgba(30,62,255,.06);
      color: rgba(15,30,122,.82);
      font-weight:1000
    }
    tr:last-child td{border-bottom:none}
    .right{text-align:right}

    .rosterGrid{display:grid; grid-template-columns: repeat(4, 1fr); gap:12px}

    .player{
      border-radius:16px;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.90);
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height: 160px;
      box-shadow: 0 10px 22px rgba(10,20,60,.06);
    }
    .playerTop{display:flex; align-items:center; justify-content:space-between; gap:8px}
    .num{
      width:34px; height:34px; border-radius: 14px;
      display:grid; place-items:center;
      background:
        radial-gradient(80px 40px at 50% 0%, rgba(215,179,92,.26), transparent 70%),
        linear-gradient(135deg, rgba(30,62,255,.14), rgba(15,30,122,.10));
      border:1px solid rgba(15,30,122,.12);
      font-weight:1000;
      color: var(--royal2);
    }
    .player h4{margin:0; font-size:14px; color: var(--royal2)}
    .meta{margin:0; color:var(--muted); font-size:12px; font-weight:700}

    .playerMedia{
      display:flex; gap:10px; align-items:center;
      border-top:1px solid rgba(15,30,122,.10);
      padding-top:10px;
    }
    .playerPhoto{
      width:58px; height:58px; border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(30,62,255,.05);
      flex:0 0 auto;
      display:grid; place-items:center;
      position:relative;
    }
    .playerPhoto img{width:100%; height:100%; object-fit:cover; display:none}
    .playerPhoto .ph{position:absolute; inset:0; display:grid; place-items:center; color:rgba(15,30,122,.65); font-weight:900}

    .quote{
      font-size:12px;
      color: rgba(15,30,122,.92);
      border-left:3px solid rgba(215,179,92,.95);
      margin:0;
      display:none;
      background: rgba(215,179,92,.10);
      border-radius: 12px;
      padding:10px;
    }

    .announceList{display:grid; gap:10px; padding:14px}
    .announce{
      padding:12px;border-radius:14px;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.90);
      box-shadow: 0 10px 22px rgba(10,20,60,.06);
    }
    .announceTop{display:flex; justify-content:space-between; gap:10px; align-items:flex-start}

    .rotwPhoto{
      width:120px; height:120px;border-radius:18px;overflow:hidden;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(30,62,255,.05);
      position:relative;
    }
    .rotwPhoto img{width:100%; height:100%; object-fit:cover; display:none}
    .rotwPhoto .ph{position:absolute; inset:0; display:grid; place-items:center; color:rgba(15,30,122,.65); font-weight:900}

    .fundGrid{display:grid; grid-template-columns: repeat(3, 1fr); gap:12px}
    .fundCard{
      border-radius:16px;border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.90);
      padding:14px;display:flex;flex-direction:column;gap:10px;min-height:160px;
      box-shadow: 0 10px 22px rgba(10,20,60,.06);
    }
    .fundCard h3{margin:0; color: var(--royal2)}

    .donateGrid{display:grid; grid-template-columns: 1fr 1fr; gap:14px; align-items:center}

    .qr{
      width:180px; height:180px;
      border-radius:20px;
      overflow:hidden;
      border:1px solid rgba(15,30,122,.16);
      background:
        radial-gradient(220px 140px at 30% 10%, rgba(30,62,255,.16), transparent 60%),
        radial-gradient(220px 140px at 80% 90%, rgba(215,179,92,.18), transparent 60%),
        rgba(255,255,255,.90);
      display:grid; place-items:center;
      box-shadow: var(--shadow2), var(--glowRoyal), var(--glowGold);
      position:relative;
    }
    .qr:before{
      content:"";
      position:absolute; inset:-1px;
      border-radius:22px;
      background: linear-gradient(135deg, rgba(30,62,255,.24), rgba(215,179,92,.18));
      opacity:.40;
      pointer-events:none;
      filter: blur(.2px);
    }
    .qrInner{
      position:relative;
      width: calc(100% - 14px);
      height: calc(100% - 14px);
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.92);
      display:grid; place-items:center;
    }
    .qr img{width:100%; height:100%; object-fit:cover; display:none}
    .ph{display:grid; place-items:center; color:rgba(15,30,122,.65); font-weight:900}

    .sponsorGrid{display:grid;grid-template-columns: repeat(6, 1fr);gap:12px;padding:14px;}
    .sponsor{
      border-radius:16px;border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.90);
      aspect-ratio: 1/1;
      display:grid;place-items:center;overflow:hidden;
      box-shadow: 0 10px 22px rgba(10,20,60,.06);
    }
    .sponsor img{width:100%; height:100%; object-fit:contain; padding:10px}

    .mediaGrid{display:grid; grid-template-columns: 1.25fr .75fr; gap:14px; padding:14px;}
    .embed{
      width:100%;
      aspect-ratio:16/9;
      border-radius:16px;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.90);
      display:none;
      box-shadow: 0 10px 22px rgba(10,20,60,.06);
    }
    .playlist{display:grid; gap:10px}
    .track{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.90);
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(10,20,60,.06);
    }
    .track:hover{background: #fff}
    .trackTitle{font-weight:1000; font-size:13px; color: var(--royal2)}
    .trackMeta{font-size:12px; color:var(--muted); margin-top:2px; font-weight:700}
    .dot{
      width:10px; height:10px; border-radius:999px;
      border:1px solid rgba(15,30,122,.18);
      background: rgba(15,30,122,.10);
    }
    .dot.on{background: rgba(215,179,92,.95); border-color: rgba(215,179,92,.60)}
    .miniRow{display:flex; gap:10px; flex-wrap:wrap}
    .miniBtn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(15,30,122,.14);
      background: rgba(255,255,255,.88);
      color:var(--royal2);
      cursor:pointer;
      font-weight:1000;
      user-select:none;
      box-shadow: 0 10px 22px rgba(10,20,60,.06);
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .miniBtn:hover{background:#fff}

    /* roster scroll box */
    .rosterScroll{
      border-radius: 18px;
      border: 1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.60);
      padding:12px;
      overflow:auto;
      max-height: 560px;
      box-shadow: inset 0 0 0 1px rgba(30,62,255,.05);
    }
    .rosterScroll::-webkit-scrollbar{height:10px;width:10px}
    .rosterScroll::-webkit-scrollbar-thumb{background: rgba(15,30,122,.18); border-radius:999px}
    .rosterScroll::-webkit-scrollbar-thumb:hover{background: rgba(15,30,122,.26)}
    .rosterScroll::-webkit-scrollbar-track{background: rgba(15,30,122,.06); border-radius:999px}

    /* ===== HERO SLIDESHOW (BIG SQUARE) ===== */
    .heroShowcaseRow{
      display:flex;
      align-items:flex-start;
      justify-content:flex-start;
      margin-top:14px;
    }
    .showcaseBox{
      width: min(340px, 92vw);
      height: min(340px, 92vw);
      border-radius: 22px;
      overflow:hidden;
      border:1px solid rgba(15,30,122,.14);
      background:
        radial-gradient(380px 140px at 20% 0%, rgba(30,62,255,.12), transparent 60%),
        radial-gradient(320px 160px at 90% 100%, rgba(215,179,92,.18), transparent 62%),
        rgba(255,255,255,.88);
      box-shadow: var(--shadow2), var(--glowRoyal), var(--glowGold);
      position:relative;
    }
    .showcaseBox:before{
      content:"";
      position:absolute; inset:-1px;
      border-radius: 24px;
      background: linear-gradient(135deg, rgba(30,62,255,.22), rgba(215,179,92,.18));
      opacity:.35;
      pointer-events:none;
    }
    .showcaseInner{
      position:absolute; inset:8px;
      border-radius: 16px;
      overflow:hidden;
      border:1px solid rgba(15,30,122,.12);
      background: rgba(255,255,255,.92);
    }
    .showcaseImg{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      opacity:0;
      transform: scale(1.02);
      transition: opacity 600ms ease, transform 1200ms ease;
      display:block;
    }
    .showcaseImg.on{
      opacity:1;
      transform: scale(1);
    }
    .showcasePh{
      position:absolute; inset:0;
      display:grid; place-items:center;
      color: rgba(15,30,122,.70);
      font-weight:900;
      font-size:13px;
      padding: 0 14px;
      text-align:center;
    }
    .showcaseDots{
      position:absolute;
      right:12px;
      bottom:12px;
      display:flex;
      gap:7px;
      z-index:2;
    }
    .sdot{
      width:9px; height:9px;
      border-radius:999px;
      border:1px solid rgba(15,30,122,.18);
      background: rgba(15,30,122,.10);
      box-shadow: 0 0 14px rgba(30,62,255,.14);
    }
    .sdot.on{
      background: rgba(215,179,92,.95);
      border-color: rgba(215,179,92,.55);
      box-shadow: var(--glowGold);
    }

    footer{padding: 28px 0 44px; color: var(--muted); position:relative; z-index:1}
    .foot{
      display:flex;flex-wrap:wrap;gap:12px;justify-content:space-between;align-items:center;
      border-top: 1px solid rgba(15,30,122,.12);
      padding-top: 16px;
    }
    .small{font-size:12px; font-weight:700}

    @media (max-width: 1020px){
      .heroGrid{grid-template-columns: 1fr}
      .rosterGrid{grid-template-columns: repeat(3, 1fr)}
      .sponsorGrid{grid-template-columns: repeat(4, 1fr)}
      .fundGrid{grid-template-columns: repeat(2, 1fr)}
      .donateGrid{grid-template-columns: 1fr}
      .mediaGrid{grid-template-columns: 1fr}
      .rosterScroll{max-height: 540px}
    }

    @media (max-width: 720px){
      .grid2{grid-template-columns: 1fr}
      .rosterGrid{grid-template-columns: repeat(2, 1fr)}
      .sponsorGrid{grid-template-columns: repeat(3, 1fr)}
      .fundGrid{grid-template-columns: 1fr}
      .heroTitle{font-size: 32px}
      .rosterScroll{max-height: 540px}
      .brand{min-width:auto}
    }
  </style>
</head>

<body>

<header>
  <div class="container">
    <div class="nav">
      <a class="brand" href="#top" aria-label="Go to top">
        <div class="logo" aria-hidden="true">
          <img class="logoImg" src="images/royals-logo.png" alt="Oklahoma Royals logo" onerror="this.style.display='none'">
        </div>
        <div>
          <h1>Oklahoma Royals</h1>
          <p>8U & 9U ‚Ä¢ okroyals.com</p>
        </div>
      </a>

      <!-- ‚úÖ Menu button only (all nav links are inside the drawer) -->
      <button class="hamburger" id="openMenu" type="button" aria-label="Open menu" aria-controls="mobileDrawer" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile menu drawer -->
<div class="drawerOverlay" id="drawerOverlay" aria-hidden="true"></div>
<aside class="drawer" id="mobileDrawer" aria-label="Mobile menu" role="dialog" aria-modal="true">
  <div class="drawerTop">
    <div class="drawerTitle">
      <div class="logo" style="width:36px;height:36px;border-radius:14px" aria-hidden="true">
        <img class="logoImg" src="images/royals-logo.png" alt="" onerror="this.style.display='none'">
      </div>
      <div>
        <b>Royals HQ</b><br>
        <small>Quick navigation</small>
      </div>
    </div>
    <button class="drawerClose" id="closeMenu" type="button" aria-label="Close menu">‚úï</button>
  </div>

  <div class="drawerLinks">
    <a href="#announcements" data-close-menu><span>Announcements</span><small>Updates & reminders</small></a>
    <a href="#schedule" data-close-menu><span>Schedule</span><small>Games & practices</small></a>
    <a href="#roster" data-close-menu><span>Roster</span><small>Players</small></a>
    <a href="#royal" data-close-menu><span>Royal of the Week</span><small>Spotlight</small></a>
    <a href="#donate" data-close-menu><span>Donate</span><small>Cash App QR</small></a>
    <a href="#fundraisers" data-close-menu><span>Fundraisers</span><small>Ways to support</small></a>
    <a href="#highlights" data-close-menu><span>Highlights</span><small>YouTube playlist</small></a>
    <a href="#sponsors" data-close-menu><span>Sponsors</span><small>Supporters</small></a>
    <a href="#links" data-close-menu><span>Links</span><small>Quick links</small></a>

    <a id="usssaDrawer" href="https://www.usssa.events/teams/?usssa_team_id=3318193" target="_blank" rel="noopener" data-close-menu>
      <span>USSSA Team Page</span><small>Events / details</small>
    </a>
  </div>

  <div class="drawerCtas">
    <button class="btn" type="button" data-team-filter="All">All</button>
    <button class="btn" type="button" data-team-filter="9U">üî• 9U</button>
    <button class="btn" type="button" data-team-filter="8U">‚ö° 8U</button>
    <a class="btn primary" href="#donate" data-close-menu>‚ù§Ô∏è Donate</a>
    <a class="btn" id="usssaDrawerBtn" href="https://www.usssa.events/teams/?usssa_team_id=3318193" target="_blank" rel="noopener" data-close-menu>üèüÔ∏è USSSA</a>
  </div>
</aside>

<main id="top">
  <div class="container">

    <section class="hero">
      <div class="heroGrid">
        <div class="card heroMain">
          <span class="tag" id="nextGameTag">
            <img class="tagLogo" src="images/royals-logo.png" alt="" onerror="this.style.display='none'">
            <b>Oklahoma Royals</b> ‚Ä¢ 8U &amp; 9U
          </span>

          <h2 class="heroTitle">Royals <span class="glow">HQ</span></h2>
          <p class="heroDesc">Schedules, updates, links, and highlights for Oklahoma Royals 8U &amp; 9U.</p>

          <!-- ‚úÖ BIG SQUARE SLIDESHOW (MOVED HERE) -->
          <div class="heroShowcaseRow" aria-label="Royals hero slideshow">
            <div class="showcaseBox" id="showcaseBox" title="Royals photos">
              <div class="showcaseInner">
                <img class="showcaseImg" id="showcaseImgA" alt="Royals slideshow photo" />
                <img class="showcaseImg" id="showcaseImgB" alt="Royals slideshow photo" />
                <div class="showcasePh" id="showcasePh">Add photos in the <b>Site</b> tab: <b>slideshow_urls</b> (or <b>slide_1_url</b>‚Ä¶)</div>
              </div>
              <div class="showcaseDots" id="showcaseDots" aria-hidden="true"></div>
            </div>
          </div>

          <p class="small" style="margin:12px 0 0; color:var(--muted)">Stay Royal üëë</p>
        </div>

        <div class="card" style="padding:16px; display:flex; flex-direction:column; gap:12px;">
          <div class="miniCard">
            <h3>Home Field</h3>
            <p><b id="homeFieldName">Stroud Little League Field 2</b><br><span style="color: var(--muted)" id="homeFieldAddr"></span></p>
          </div>
          <div class="miniCard">
            <h3>GameChanger</h3>
            <p><a id="teamChatLink" href="https://web.gc.com/teams/MoEKfeIw0z3C/live/?pid=team_share_link&c=team_share_link" target="_blank" rel="noopener" style="color:var(--royal)">Join Oklahoma Royals 9U on GameChanger</a></p>
          </div>
          <div class="miniCard">
            <h3>USSSA</h3>
            <p><a id="usssaSide" href="https://www.usssa.events/teams/?usssa_team_id=3318193" target="_blank" rel="noopener" style="color:var(--royal)">Open our USSSA team page</a></p>
          </div>
        </div>
      </div>
    </section>

    <section id="announcements">
      <div class="sectionHead">
        <div>
          <h2>Announcements</h2>
          <p>Team updates and reminders.</p>
        </div>
        <span class="pill">Live</span>
      </div>

      <div class="card">
        <div class="announceList" id="announceList"></div>
      </div>
    </section>

    <section id="schedule">
      <div class="sectionHead">
        <div>
          <h2>Schedule</h2>
          <p>Game and practice schedule.</p>
        </div>
        <span class="pill">Live</span>
      </div>

      <div class="card">
        <div class="wrap">
          <div class="controls">
            <input class="input" id="scheduleSearch" placeholder="Search schedule‚Ä¶" />
            <button class="btn" id="resetSchedule" type="button">Reset</button>
          </div>

          <div style="overflow:auto; border-radius: 16px">
            <table aria-label="Royals schedule">
              <thead>
                <tr>
                  <th style="width:120px">Date</th>
                  <th style="width:95px">Time</th>
                  <th>Opponent</th>
                  <th>Field</th>
                  <th style="width:140px">Uniform</th>
                  <th>Needs / Notes</th>
                  <th class="right" style="width:140px">Status</th>
                </tr>
              </thead>
              <tbody id="scheduleBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <section id="roster">
      <div class="sectionHead">
        <div>
          <h2>Roster</h2>
          <p>Current roster.</p>
        </div>
        <span class="pill">Live</span>
      </div>

      <div class="card">
        <div class="wrap">
          <div class="controls" style="margin-bottom:12px">
            <input class="input" id="rosterSearch" placeholder="Search roster‚Ä¶" />
            <button class="btn" id="resetRoster" type="button">Reset</button>
          </div>

          <div class="rosterScroll" id="rosterScroll">
            <div class="rosterGrid" id="rosterGrid"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="royal">
      <div class="sectionHead">
        <div>
          <h2><img class="tagLogo" src="images/royals-logo.png" alt="" onerror="this.style.display='none'"> Royal of the Week</h2>
          <p>Recognizing effort, attitude, and hustle.</p>
        </div>
        <span class="pill">Live</span>
      </div>

      <div class="card" style="padding:14px">
        <div class="grid2" style="align-items:center">
          <div class="miniCard">
            <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start">
              <div>
                <h3 id="rotwName" style="margin:0 0 6px; font-size:18px"></h3>
                <p class="meta" id="rotwMeta" style="margin:0"></p>
              </div>
              <span class="status" id="rotwBadge">Royal</span>
            </div>
            <p id="rotwBio" style="margin:10px 0 0; color:var(--muted)"></p>
          </div>

          <div class="miniCard">
            <div style="display:flex; gap:12px; align-items:center">
              <div class="rotwPhoto">
                <img id="rotwImg" alt="Royal of the Week photo" src="" />
                <div id="rotwImgPh" class="ph">Photo</div>
              </div>
              <div>
                <div style="font-weight:1000; color:var(--royal2)">ROYAL MODE</div>
                <div class="small">Spotlight player of the week.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="donate">
      <div class="sectionHead">
        <div>
          <h2>‚ù§Ô∏è Donate</h2>
          <p>Donate via Cash App QR.</p>
        </div>
        <span class="pill">QR</span>
      </div>

      <div class="card" style="padding:14px">
        <div class="donateGrid">
          <div class="miniCard">
            <h3 style="margin:0 0 6px">Support the Oklahoma Royals</h3>
            <p style="margin:0; color:var(--muted)">Scan the QR code to donate via Cash App.</p>
            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px">
              <a class="btn primary" id="cashAppBtn" href="https://cash.app/$OkRoyals" target="_blank" rel="noopener">Open Cash App</a>
            </div>
            <p class="small" style="margin:10px 0 0; color:rgba(85,98,122,.92)">
              Tip: you can set your own QR image in the <b>Site</b> tab with <b>donate_qr_url</b> (or <b>qr_url</b>).
            </p>
          </div>

          <div class="miniCard" style="display:flex; justify-content:center; align-items:center">
            <div class="qr" title="Donation QR">
              <div class="qrInner">
                <img id="donateQrImg" alt="Donation QR code" src="" />
                <div id="donateQrPh" class="ph">QR</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="fundraisers">
      <div class="sectionHead">
        <div>
          <h2>üéØ Fundraisers</h2>
          <p>Ways to support the team.</p>
        </div>
        <span class="pill">Live</span>
      </div>

      <div class="card">
        <div class="wrap">
          <div class="fundGrid" id="fundGrid"></div>
        </div>
      </div>
    </section>

    <section id="highlights">
      <div class="sectionHead">
        <div>
          <h2>üé¨ Highlights</h2>
          <p>YouTube playlist (tap one to play).</p>
        </div>
        <span class="pill">Live</span>
      </div>

      <div class="card">
        <div class="mediaGrid">
          <div class="miniCard">
            <iframe id="ytPlayer" class="embed" title="Highlights player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>

            <div id="ytPlayerPh" class="ph" style="aspect-ratio:16/9;border-radius:16px;border:1px solid rgba(15,30,122,.12);background:rgba(255,255,255,.90);display:grid;place-items:center;color:rgba(15,30,122,.65)">
              Add YouTube links in the <b>Highlights</b> tab to start playing.
            </div>

            <div class="miniRow" style="margin-top:12px">
              <button class="miniBtn" id="ytPrev" type="button">‚èÆ Prev</button>
              <button class="miniBtn" id="ytNext" type="button">Next ‚è≠</button>
              <a class="miniBtn" href="https://web.gc.com/teams/MoEKfeIw0z3C/live/?pid=team_share_link&c=team_share_link" target="_blank" rel="noopener">Live on GameChanger</a>
            </div>
          </div>

          <div>
            <div class="miniCard">
              <h3 style="margin:0 0 6px">Playlist</h3>
              <p class="small" style="margin:0;color:var(--muted)">
                Add rows in the <b>Highlights</b> tab (status=active). Team filter applies from menu.
              </p>
            </div>

            <div class="playlist" id="highlightList" style="margin-top:12px"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="sponsors">
      <div class="sectionHead">
        <div>
          <h2>ü§ù Sponsors</h2>
          <p>Thank you to our supporters.</p>
        </div>
        <span class="pill">Live</span>
      </div>

      <div class="card">
        <div class="sponsorGrid" id="sponsorGrid"></div>
      </div>
    </section>

    <section id="links">
      <div class="sectionHead">
        <div>
          <h2>Links</h2>
          <p>Quick links.</p>
        </div>
        <span class="pill">Quick</span>
      </div>

      <div class="grid2">
        <div class="card" style="padding:14px">
          <div class="miniCard">
            <h3>GameChanger</h3>
            <p><a href="https://web.gc.com/teams/MoEKfeIw0z3C/live/?pid=team_share_link&c=team_share_link" target="_blank" rel="noopener" style="color:var(--royal)">Join Oklahoma Royals 9U on GameChanger</a></p>
          </div>

          <div class="miniCard">
            <h3>USSSA</h3>
            <p><a id="usssaLinks" href="https://www.usssa.events/teams/?usssa_team_id=3318193" target="_blank" rel="noopener" style="color:var(--royal)">View our USSSA team page</a></p>
          </div>

          <div class="miniCard">
            <h3>Home Field</h3>
            <p><b>Stroud Little League Field 2</b></p>
          </div>
        </div>

        <div class="card" style="padding:14px">
          <div class="miniCard">
            <h3>Contact</h3>
            <p>Check GameChanger for live updates and messaging.</p>
          </div>
          <div class="miniCard">
            <h3>Donate</h3>
            <p>Cash App: <a id="cashAppLink" href="https://cash.app/$OkRoyals" target="_blank" rel="noopener" style="color:var(--royal)">cash.app/$OkRoyals</a></p>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="foot">
        <div>
          <div style="display:flex; align-items:center; gap:10px">
            <div class="logo" style="width:34px; height:34px; border-radius:14px" aria-hidden="true">
              <img class="logoImg" src="images/royals-logo.png" alt="" onerror="this.style.display='none'">
            </div>
            <div>
              <div style="font-weight:1000; color:var(--royal2)">Oklahoma Royals</div>
              <div class="small">¬© <span id="year"></span> ‚Ä¢ okroyals.com</div>
            </div>
          </div>
        </div>
        <div class="small">Oklahoma Royals Baseball ‚Ä¢ Family ‚Ä¢ Team ‚Ä¢ Hustle</div>
      </div>
    </footer>

  </div>
</main>

<script>
  const SHEET_ID = "1FQufd7usdD8Xeqyq5g9u4pagcEqH6HDbRPaMbavidmM";
  const USSSA_URL = "https://www.usssa.events/teams/?usssa_team_id=3318193";
  let ACTIVE_TEAM = "All";

  document.getElementById('year').textContent = new Date().getFullYear();

  const $ = (s) => document.querySelector(s);
  const $$ = (s) => Array.from(document.querySelectorAll(s));

  // Ensure all USSSA anchors point to the correct URL
  ['usssaDrawer','usssaDrawerBtn','usssaSide','usssaLinks'].forEach(id=>{
    const el = document.getElementById(id);
    if (el){ el.href = USSSA_URL; }
  });

  const escapeHtml = (x) => String(x ?? "")
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;")
    .replaceAll('"', "&quot;")
    .replaceAll("'", "&#39;");

  function csvToRows(csvText){
    const rows=[];
    let row=[];
    let cell="";
    let inQuotes=false;

    for (let i=0;i<csvText.length;i++){
      const c=csvText[i];
      const next=csvText[i+1];
      if (c==='"'){
        if (inQuotes && next==='"'){ cell+='"'; i++; }
        else { inQuotes=!inQuotes; }
      } else if (c===',' && !inQuotes){
        row.push(cell); cell="";
      } else if ((c==='\n' || c==='\r') && !inQuotes){
        if (c==='\r' && next==='\n') i++;
        row.push(cell); cell="";
        if (row.some(v=>String(v).trim()!=="")) rows.push(row);
        row=[];
      } else {
        cell += c;
      }
    }
    row.push(cell);
    if (row.some(v=>String(v).trim()!=="")) rows.push(row);
    return rows;
  }

  function normalizeHeader(s){
    return String(s ?? "").trim().toLowerCase().replace(/\s+/g, "_");
  }

  function rowsToObjects(rows){
    if (!rows.length) return [];
    const header = rows[0].map(normalizeHeader);
    return rows.slice(1).map(r=>{
      const o={};
      header.forEach((h,idx)=>o[h]=(r[idx]??"").trim());
      return o;
    }).filter(o=>Object.values(o).some(v=>String(v).trim()!==""));
  }

  async function fetchTabCsv(tab){
    const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(tab)}`;
    const res = await fetch(url);
    if (!res.ok) throw new Error(`Could not load tab: ${tab}`);
    return await res.text();
  }

  async function fetchOptionalTab(tab){
    try { return await fetchTabCsv(tab); }
    catch { return ""; }
  }

  function matchTeam(t){
    t = String(t||"").trim();
    if (!t || t.toLowerCase()==='all') return true;
    if (ACTIVE_TEAM==='All') return true;
    return t.toLowerCase()===ACTIVE_TEAM.toLowerCase();
  }

  function setTeam(team){
    ACTIVE_TEAM = team || "All";
    $$('[data-team-filter]').forEach(b=>b.classList.toggle('primary', b.getAttribute('data-team-filter')===ACTIVE_TEAM));
    renderAnnouncements(window.__ann || []);
    renderSchedule(window.__sched || []);
    renderRoster(window.__rost || []);
    renderHighlights(window.__hl || []);
  }

  function renderAnnouncements(items){
    const wrap = $('#announceList');
    const f = items.filter(a=>matchTeam(a.team));
    if (!f.length){
      wrap.innerHTML = `
        <div class="announce">
          <div class="announceTop">
            <div>
              <h4 style="margin:0 0 6px;color:var(--royal2)">No announcements yet</h4>
              <p class="meta">Add rows in the <b>Announcements</b> tab.</p>
            </div>
            <span class="status">Info</span>
          </div>
          <p></p>
        </div>
      `;
      return;
    }
    wrap.innerHTML = f.slice(0,10).map(a=>{
      const title = escapeHtml(a.title||'Update');
      const date  = escapeHtml(a.date||'');
      const tag   = escapeHtml(a.tag || a.team || 'Info');
      const body  = escapeHtml(a.body||'');
      const cls = tag.toLowerCase().includes('practice') ? 'warn' : (tag.toLowerCase().includes('game') ? 'good' : '');
      return `
        <div class="announce">
          <div class="announceTop">
            <div>
              <h4 style="margin:0 0 6px;color:var(--royal2)">${title}</h4>
              <p class="meta">${date}${a.team?` ‚Ä¢ ${escapeHtml(a.team)}`:''}</p>
            </div>
            <span class="status ${cls}">${tag}</span>
          </div>
          <p style="margin:10px 0 0">${body}</p>
        </div>
      `;
    }).join('');
  }

  function renderSchedule(items){
    const body = $('#scheduleBody');
    const f = items.filter(g=>matchTeam(g.team));
    if (!f.length){
      body.innerHTML = `<tr><td colspan="7">No schedule yet ‚Äî add rows in the <b>Schedule</b> tab.</td></tr>`;
      $('#nextGameTag').innerHTML = `<img class="tagLogo" src="images/royals-logo.png" alt="" onerror="this.style.display='none'"><b>Oklahoma Royals</b> ‚Ä¢ 8U &amp; 9U`;
      window.__scheduleRows = Array.from(body.querySelectorAll('tr'));
      return;
    }
    body.innerHTML = f.map(g=>{
      const date = escapeHtml(g.date);
      const time = escapeHtml(g.time);
      const opp  = escapeHtml(g.opponent);
      const field= escapeHtml(g.field);
      const status = escapeHtml(g.status||'Game');

      const uniform = escapeHtml(g.uniform || g.uni || g.uniform_combo || "");
      const needs = escapeHtml(g.needs || g.notes || g.what_needed || "");

      const cls = status.toLowerCase().includes('practice') ? 'warn' : (status.toLowerCase().includes('game') ? 'good' : '');
      return `
        <tr>
          <td>${date}</td>
          <td>${time}</td>
          <td>${opp}${g.team?` <span class="pill" style="margin-left:8px">${escapeHtml(g.team)}</span>`:''}</td>
          <td>${field}</td>
          <td>${uniform}</td>
          <td>${needs}</td>
          <td class="right"><span class="status ${cls}">${status}</span></td>
        </tr>
      `;
    }).join('');
    window.__scheduleRows = Array.from(body.querySelectorAll('tr'));

    const next = f[0];
    const nextLine = `${next.date||''} ${next.time||''} ‚Ä¢ ${next.opponent||''}`.trim();
    if (nextLine) $('#nextGameTag').innerHTML = `‚öæ <b>Next:</b> ${escapeHtml(nextLine)}`;
  }

  function renderRoster(items){
    const grid = $('#rosterGrid');
    const f = items.filter(p=>matchTeam(p.team));

    if (!f.length){
      grid.innerHTML = `
        <div class="player">
          <div class="playerTop">
            <div class="num">‚Äî</div>
            <div style="text-align:right">
              <h4>No roster yet</h4>
              <p class="meta">Add rows in <b>Roster</b> tab</p>
            </div>
          </div>
          <p class="meta"></p>
        </div>
      `;
      window.__rosterCards = Array.from(grid.querySelectorAll('.player'));
      return;
    }

    grid.innerHTML = f.map((p)=>{
      const num = escapeHtml(p.number||'');
      const name= escapeHtml(p.name||'Player');
      const pos = escapeHtml(p.position||'');
      const note= escapeHtml(p.note||'');
      const team= escapeHtml(p.team||'');

      const photo = (p.photo_url || p.photo || "").trim();
      const quote = (p.quote || p.saying || "").trim();

      const hay = escapeHtml(`${num} ${name} ${pos} ${note} ${team} ${quote}`.toLowerCase());
      const hasQuote = !!quote;
      const qHtml = hasQuote ? `<p class="quote" data-quote style="display:block">‚Äú${escapeHtml(quote)}‚Äù</p>` : ``;

      return `
        <div class="player" data-search="${hay}">
          <div class="playerTop">
            <div class="num">${num||'‚Äî'}</div>
            <div style="text-align:right; min-width:0">
              <h4 style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${name}</h4>
              <p class="meta">${pos}${team?` ‚Ä¢ ${team}`:''}</p>
            </div>
          </div>

          <p class="meta">${note}</p>

          ${qHtml}

          <div class="playerMedia">
            <div class="playerPhoto" title="${photo ? 'Tap to open photo' : 'Player photo'}" data-open-photo="${escapeHtml(photo)}">
              <img data-photo-img alt="${name} photo" src="${escapeHtml(photo)}" />
              <div class="ph">Photo</div>
            </div>

            <div style="min-width:0; flex:1">
              <div class="small" style="color:var(--muted)">${photo ? 'Tap photo to view' : 'No photo yet'}</div>
            </div>
          </div>
        </div>
      `;
    }).join('');

    window.__rosterCards = Array.from(grid.querySelectorAll('.player'));

    grid.querySelectorAll('[data-photo-img]').forEach(img=>{
      const wrap = img.closest('.playerPhoto');
      const ph = wrap?.querySelector('.ph');
      if (img.getAttribute('src')){
        img.style.display = 'block';
        if (ph) ph.style.display = 'none';
        img.onerror = ()=>{
          img.style.display = 'none';
          if (ph) ph.style.display = 'grid';
        };
      } else {
        img.style.display = 'none';
        if (ph) ph.style.display = 'grid';
      }
    });

    grid.querySelectorAll('[data-open-photo]').forEach(el=>{
      const src = (el.getAttribute('data-open-photo') || "").trim();
      if (!src) return;
      el.style.cursor = "pointer";
      el.addEventListener('click', ()=> window.open(src, '_blank', 'noopener'));
    });
  }

  function renderRotw(items){
    const cur = items[0] || {};
    const name = cur.name || 'No Royal yet';
    const team = cur.team || '';
    const week = cur.week || '';
    const bio  = cur.bio || '';
    const photo= cur.photo_url || '';

    $('#rotwName').textContent = name;
    $('#rotwMeta').textContent = (name==='No Royal yet') ? 'Add a row in RoyalOfTheWeek' : [team, week].filter(Boolean).join(' ‚Ä¢ ');
    $('#rotwBio').textContent = bio;
    $('#rotwBadge').textContent = team ? team : 'Royal';

    const img = $('#rotwImg');
    const ph = $('#rotwImgPh');
    if (photo){
      img.src = photo;
      img.style.display = 'block';
      ph.style.display = 'none';
      img.onerror = ()=>{ img.style.display='none'; ph.style.display='grid'; };
    } else {
      img.style.display='none';
      ph.style.display='grid';
    }
  }

  function renderSite(items){
    const s = items[0] || {};
    $('#homeFieldName').textContent = s.home_field_name || 'Stroud Little League Field 2';
    $('#homeFieldAddr').textContent = s.home_field_address || '';

    const chatLabel = s.team_chat_label || 'Join Oklahoma Royals 9U on GameChanger';
    const chatUrl = s.team_chat_url || 'https://web.gc.com/teams/MoEKfeIw0z3C/live/?pid=team_share_link&c=team_share_link';
    const link = $('#teamChatLink');
    link.textContent = chatLabel;
    link.href = chatUrl;

    const cash = (s.cash_app_url || 'https://cash.app/$OkRoyals').trim();
    $('#cashAppBtn').href = cash;
    $('#cashAppLink').href = cash;
    $('#cashAppLink').textContent = cash.replace(/^https?:\/\//,'');

    // Optional override: if you ever add usssa_url in Site tab
    const usssa = (s.usssa_url || "").trim();
    if (usssa){
      ['usssaDrawer','usssaDrawerBtn','usssaSide','usssaLinks'].forEach(id=>{
        const el = document.getElementById(id);
        if (el){ el.href = usssa; }
      });
    }

    // Slideshow setup (now HERO)
    setupHeroSlideshow(s);
    return s;
  }

  function renderFundraisers(items){
    const grid = $('#fundGrid');
    const keep = items.filter(f=>{
      const s = String(f.status||'').trim().toLowerCase();
      return s==='active' || s==='upcoming';
    });
    if (!keep.length){
      grid.innerHTML = `
        <div class="fundCard">
          <h3>No fundraisers yet</h3>
          <p>Add rows in the <b>Fundraisers</b> tab (status Active/Upcoming).</p>
        </div>
      `;
      return;
    }
    grid.innerHTML = keep.slice(0,6).map(f=>{
      const title = escapeHtml(f.title||'Fundraiser');
      const status= escapeHtml(f.status||'Active');
      const body  = escapeHtml(f.body||'');
      const link  = (f.link||'').trim();
      const cls = status.toLowerCase()==='active' ? 'good' : 'warn';
      const btn = link ? `<a class="btn primary" href="${escapeHtml(link)}" target="_blank" rel="noopener">Open</a>` : '';
      return `
        <div class="fundCard">
          <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start">
            <h3>${title}</h3>
            <span class="status ${cls}">${status}</span>
          </div>
          <p style="margin:0; color:var(--muted)">${body}</p>
          <div style="margin-top:auto; display:flex; gap:10px; flex-wrap:wrap">${btn}</div>
        </div>
      `;
    }).join('');
  }

  function renderSponsors(items){
    const grid = $('#sponsorGrid');
    if (!items.length){
      grid.innerHTML = `<div class="sponsor"><div class="ph" style="color:rgba(15,30,122,.65)">Add sponsor logos in <b>Sponsors</b> tab</div></div>`;
      return;
    }
    grid.innerHTML = items.slice(0,24).map(s=>{
      const logo = (s.logo_url||'').trim();
      const url  = (s.website_url||'').trim();
      const inner = logo
        ? `<img src="${escapeHtml(logo)}" alt="Sponsor logo" onerror="this.style.display='none'">`
        : `<div class="ph" style="color:rgba(15,30,122,.65)">Logo</div>`;
      return url
        ? `<a class="sponsor" href="${escapeHtml(url)}" target="_blank" rel="noopener">${inner}</a>`
        : `<div class="sponsor">${inner}</div>`;
    }).join('');
  }

  function setupDonateQr(siteObj){
    const s = siteObj || {};
    const img = $('#donateQrImg');
    const ph = $('#donateQrPh');

    const cashLink = (s.cash_app_url || 'https://cash.app/$OkRoyals').trim();
    const customQr = (s.donate_qr_url || s.qr_url || '').trim();

    const urlToUse = customQr
      ? customQr
      : `https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=${encodeURIComponent(cashLink)}`;

    img.src = urlToUse;
    img.style.display = 'block';
    ph.style.display = 'none';
    img.onerror = ()=>{ img.style.display='none'; ph.style.display='grid'; };
  }

  /* ===== HERO SLIDESHOW ===== */
  let SHOW = { urls: [], i: 0, t: null, usingA: true };

  function splitUrls(v){
    return String(v||"")
      .split(/[\n,]+/g)
      .map(s=>s.trim())
      .filter(Boolean);
  }

  function buildSlideshowUrls(site){
    const s = site || {};
    let urls = [];

    urls = urls.concat(splitUrls(s.slideshow_urls));
    urls = urls.concat(splitUrls(s.slides));
    urls = urls.concat(splitUrls(s.slideshow));

    for (let k=1;k<=10;k++){
      urls.push(String(s[`slide_${k}_url`] || s[`slide${k}_url`] || s[`header_photo_${k}`] || "").trim());
    }

    urls = urls.filter(Boolean);

    const seen = new Set();
    urls = urls.filter(u=>{
      if (seen.has(u)) return false;
      seen.add(u);
      return true;
    });

    return urls;
  }

  function renderShowcaseDots(){
    const dots = $('#showcaseDots');
    if (!dots) return;
    dots.innerHTML = "";
    SHOW.urls.forEach((_, idx)=>{
      const d = document.createElement('div');
      d.className = 'sdot' + (idx===SHOW.i ? ' on' : '');
      dots.appendChild(d);
    });
  }

  function setShowcaseUrl(url){
    const a = $('#showcaseImgA');
    const b = $('#showcaseImgB');
    const ph = $('#showcasePh');

    if (!url){
      ph.style.display = 'grid';
      a.classList.remove('on');
      b.classList.remove('on');
      return;
    }

    ph.style.display = 'none';

    const next = SHOW.usingA ? a : b;
    const cur  = SHOW.usingA ? b : a;

    next.src = url;
    next.onload = ()=>{
      cur.classList.remove('on');
      next.classList.add('on');
      SHOW.usingA = !SHOW.usingA;
    };
    next.onerror = ()=>{
      advanceShowcase(true);
    };
  }

  function advanceShowcase(fromError=false){
    if (!SHOW.urls.length) return;
    SHOW.i = (SHOW.i + 1) % SHOW.urls.length;
    renderShowcaseDots();
    setShowcaseUrl(SHOW.urls[SHOW.i]);

    if (fromError && SHOW.urls.length === 1){
      $('#showcasePh').style.display = 'grid';
    }
  }

  function setupHeroSlideshow(site){
    const urls = buildSlideshowUrls(site);
    SHOW.urls = urls;
    SHOW.i = 0;

    renderShowcaseDots();

    if (!urls.length){
      setShowcaseUrl("");
      if (SHOW.t) clearInterval(SHOW.t);
      SHOW.t = null;
      return;
    }

    setShowcaseUrl(urls[0]);

    if (SHOW.t) clearInterval(SHOW.t);
    SHOW.t = setInterval(()=>advanceShowcase(false), 4200);
  }

  /* ===== YouTube Highlights ===== */
  let YT = { list: [], idx: 0 };

  function youtubeIdFromUrl(url){
    url = String(url||"").trim();
    if (!url) return "";
    let m = url.match(/youtu\.be\/([a-zA-Z0-9_-]{6,})/);
    if (m) return m[1];
    m = url.match(/[?&]v=([a-zA-Z0-9_-]{6,})/);
    if (m) return m[1];
    m = url.match(/youtube\.com\/embed\/([a-zA-Z0-9_-]{6,})/);
    if (m) return m[1];
    return "";
  }

  function renderYtList(){
    const wrap = $('#highlightList');
    if (!wrap) return;

    if (!YT.list.length){
      wrap.innerHTML = `
        <div class="track" style="cursor:default">
          <div style="min-width:0">
            <div class="trackTitle">No highlights yet</div>
            <div class="trackMeta">Add rows in the <b>Highlights</b> tab (status=active).</div>
          </div>
          <div><span class="dot"></span></div>
        </div>
      `;
      return;
    }

    wrap.innerHTML = YT.list.map((t, i)=>{
      const on = i===YT.idx;
      const title = escapeHtml(t.title || `Highlight ${i+1}`);
      const meta = [t.team, t.tag].filter(Boolean).map(escapeHtml).join(" ‚Ä¢ ");
      return `
        <div class="track" data-yt-index="${i}">
          <div style="min-width:0">
            <div class="trackTitle" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${title}</div>
            <div class="trackMeta" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${meta || "Tap to play"}</div>
          </div>
          <div><span class="dot ${on?'on':''}"></span></div>
        </div>
      `;
    }).join('');

    $$('[data-yt-index]').forEach(el=>{
      el.addEventListener('click', ()=>{
        const i = Number(el.getAttribute('data-yt-index') || 0);
        setYtIndex(i);
      });
    });
  }

  function setYtIndex(i){
    if (!YT.list.length) return;
    YT.idx = (i + YT.list.length) % YT.list.length;

    const cur = YT.list[YT.idx];
    const iframe = $('#ytPlayer');
    const ph = $('#ytPlayerPh');

    if (cur && cur.embed){
      iframe.src = cur.embed;
      iframe.style.display = "block";
      ph.style.display = "none";
    } else {
      iframe.removeAttribute('src');
      iframe.style.display = "none";
      ph.style.display = "grid";
    }
    renderYtList();
  }

  function renderHighlights(items){
    const iframe = $('#ytPlayer');
    const ph = $('#ytPlayerPh');
    const list = (items || [])
      .filter(x=>{
        const st = String(x.status||"active").trim().toLowerCase();
        return st === "active" || st === "";
      })
      .filter(x=>matchTeam(x.team))
      .map(x=>{
        const id = youtubeIdFromUrl(x.url);
        return {
          title: String(x.title||"").trim(),
          team: String(x.team||"").trim(),
          tag: String(x.tag||"").trim(),
          embed: id ? `https://www.youtube.com/embed/${id}?rel=0&modestbranding=1` : ""
        };
      })
      .filter(x=>!!x.embed);

    YT.list = list;
    YT.idx = 0;

    renderYtList();
    if (YT.list.length){
      setYtIndex(0);
    } else {
      iframe.removeAttribute('src');
      iframe.style.display = "none";
      ph.style.display = "grid";
    }
  }

  $('#ytPrev')?.addEventListener('click', ()=>setYtIndex(YT.idx - 1));
  $('#ytNext')?.addEventListener('click', ()=>setYtIndex(YT.idx + 1));

  const scheduleSearch = $('#scheduleSearch');
  function filterSchedule(){
    const q = scheduleSearch.value.trim().toLowerCase();
    const rows = window.__scheduleRows || Array.from($('#scheduleBody').querySelectorAll('tr'));
    rows.forEach(r=>r.style.display = r.innerText.toLowerCase().includes(q) ? '' : 'none');
  }
  scheduleSearch.addEventListener('input', filterSchedule);
  $('#resetSchedule').addEventListener('click', ()=>{ scheduleSearch.value=''; filterSchedule(); });

  const rosterSearch = $('#rosterSearch');
  function filterRoster(){
    const q = rosterSearch.value.trim().toLowerCase();
    const cards = window.__rosterCards || Array.from($('#rosterGrid').querySelectorAll('.player'));
    cards.forEach(c=>{
      const hay = (c.getAttribute('data-search') || c.innerText).toLowerCase();
      c.style.display = hay.includes(q) ? '' : 'none';
    });
  }
  rosterSearch.addEventListener('input', filterRoster);
  $('#resetRoster').addEventListener('click', ()=>{ rosterSearch.value=''; filterRoster(); });

  $$('[data-team-filter]').forEach(btn=>btn.addEventListener('click', ()=>{
    setTeam(btn.getAttribute('data-team-filter')||'All');
    closeMenu();
  }));

  /* ===== MENU (FIXED + EXTRA SAFE) ===== */
  function openMenu(){
    document.body.classList.add('menuOpen');
    $('#openMenu')?.setAttribute('aria-expanded','true');
  }
  function closeMenu(){
    document.body.classList.remove('menuOpen');
    $('#openMenu')?.setAttribute('aria-expanded','false');
  }

  const openBtn = $('#openMenu');
  const closeBtn = $('#closeMenu');
  openBtn?.addEventListener('click', (e)=>{ e.preventDefault(); openMenu(); });
  openBtn?.addEventListener('touchend', (e)=>{ e.preventDefault(); openMenu(); }, {passive:false});

  closeBtn?.addEventListener('click', (e)=>{ e.preventDefault(); closeMenu(); });
  closeBtn?.addEventListener('touchend', (e)=>{ e.preventDefault(); closeMenu(); }, {passive:false});

  $('#drawerOverlay')?.addEventListener('click', closeMenu);
  $$('[data-close-menu]').forEach(a=>a.addEventListener('click', closeMenu));
  document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeMenu(); });

  async function loadAll(){
    try{
      const [annCsv, schedCsv, rostCsv, rotwCsv, siteCsv, sponsorCsv, fundCsv, hlCsv] = await Promise.all([
        fetchTabCsv('Announcements'),
        fetchTabCsv('Schedule'),
        fetchTabCsv('Roster'),
        fetchTabCsv('RoyalOfTheWeek'),
        fetchTabCsv('Site'),
        fetchOptionalTab('Sponsors'),
        fetchOptionalTab('Fundraisers'),
        fetchOptionalTab('Highlights')
      ]);

      const ann = annCsv ? rowsToObjects(csvToRows(annCsv)) : [];
      const sched= schedCsv? rowsToObjects(csvToRows(schedCsv)) : [];
      const rost = rostCsv ? rowsToObjects(csvToRows(rostCsv)) : [];
      const rotw = rotwCsv ? rowsToObjects(csvToRows(rotwCsv)) : [];
      const site = siteCsv ? rowsToObjects(csvToRows(siteCsv)) : [];
      const sponsors = sponsorCsv ? rowsToObjects(csvToRows(sponsorCsv)) : [];
      const fund = fundCsv ? rowsToObjects(csvToRows(fundCsv)) : [];
      const highlights = hlCsv ? rowsToObjects(csvToRows(hlCsv)) : [];

      window.__ann = ann;
      window.__sched = sched;
      window.__rost = rost;
      window.__hl = highlights;

      const siteObj = renderSite(site);
      renderAnnouncements(ann);
      renderSchedule(sched);
      renderRoster(rost);
      renderRotw(rotw);
      renderFundraisers(fund);
      renderSponsors(sponsors);
      renderHighlights(highlights);

      setTeam('All');
      setupDonateQr(siteObj || site[0] || {});

    } catch(err){
      console.error(err);
      alert(
        "Couldn't load the Google Sheet.\n\nFixes:\n1) Share the sheet as 'Anyone with link can view' OR File > Publish to web\n2) Make sure tabs are named exactly: Announcements, Schedule, Roster, RoyalOfTheWeek, Site\n\nOptional tabs: Sponsors, Fundraisers, Highlights\n\nError: " + err.message
      );
    }
  }

  loadAll();
</script>

</body>
</html>
